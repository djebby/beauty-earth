"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[439],{439:function(e,t,s){s.r(t);var n=s(861),r=s(683),a=s(152),i=s(757),l=s.n(i),c=s(791),u=s(108),o=s(830),p=s(186),d=s(184);t.default=function(){var e=(0,c.useContext)(u.V),t=(0,c.useRef)(""),s=(0,c.useRef)(""),i=(0,c.useRef)(""),f=(0,c.useRef)(),b=(0,c.useState)(!1),m=(0,a.Z)(b,2),g=m[0],h=m[1],v=(0,c.useState)(!1),C=(0,a.Z)(v,2),j=C[0],x=C[1],y=(0,c.useState)({titleCssClasses:"",descriptionCssClasses:"",imageCssClasses:"",wrongInputsAlertVisibility:!1,wrongInputsAlertMessage:""}),w=(0,a.Z)(y,2),Z=w[0],O=w[1],P=function(e){h(!1),O((function(t){return(0,r.Z)((0,r.Z)({},t),{},{wrongInputsAlertVisibility:!0,wrongInputsAlertMessage:e})})),setTimeout((function(){O((function(e){return(0,r.Z)((0,r.Z)({},e),{},{wrongInputsAlertVisibility:!1})}))}),5e3)},k=function(){var r=(0,n.Z)(l().mark((function n(){var r,a,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h(!0),n.prev=1,!(t.current.value.trim().length>=3&&s.current.value.trim().length>=10&&void 0!==f.current.files[0])){n.next=18;break}return(r=new FormData).append("title",t.current.value),r.append("description",s.current.value),r.append("address",i.current.value),r.append("image",f.current.files[0]),n.next=10,fetch("".concat("http://localhost:4000/api/","pictures/"),{method:"POST",body:r,headers:{Authorization:"Bearer ".concat(e.token)}});case 10:return a=n.sent,n.next=13,a.json();case 13:c=n.sent,h(!1),a.ok?(x(!0),setTimeout((function(){x(!1)}),5e3),t.current.value="",s.current.value="",i.current.value="",f.current.value="",O({titleCssClasses:"",descriptionCssClasses:"",imageCssClasses:"",wrongInputsAlertVisibility:!1,wrongInputsAlertMessage:""})):(P(c.message),console.log(c)),n.next=19;break;case 18:P("Please Enter a Valid Inputs Value");case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),P("Failed to fetch"),console.log(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(){return r.apply(this,arguments)}}();return(0,d.jsxs)(o.Z,{children:[Z.wrongInputsAlertVisibility&&(0,d.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,d.jsx)("i",{className:"bi bi-exclamation-octagon-fill m-1"}),Z.wrongInputsAlertMessage]}),j&&(0,d.jsxs)("div",{className:"alert alert-success",role:"alert",children:[(0,d.jsx)("i",{className:"bi bi-send-check m-1"}),"Picture Added Successfully"]}),(0,d.jsx)(p.Z,{ref:t,type:"text",name:"title",placeholder:"picture title...",label:"Picture Title : ",cssClasses:Z.titleCssClasses,onBlur:function(){O((function(e){return(0,r.Z)((0,r.Z)({},e),{},{titleCssClasses:t.current.value.trim().length>=3?"is-valid":"is-invalid"})}))}}),(0,d.jsx)(p.Z,{ref:s,type:"text",name:"description",placeholder:"picture description...",label:"Picture Description : ",cssClasses:Z.descriptionCssClasses,onBlur:function(){O((function(e){return(0,r.Z)((0,r.Z)({},e),{},{descriptionCssClasses:s.current.value.trim().length>=10?"is-valid":"is-invalid"})}))}}),(0,d.jsx)(p.Z,{ref:i,type:"text",name:"address",placeholder:"picture address...",label:"Picture Address : "}),(0,d.jsx)(p.Z,{ref:f,type:"file",name:"image",accept:".jpg,.png,.jpeg",label:"Picture : ",cssClasses:Z.imageCssClasses,onChange:function(){O((function(e){return(0,r.Z)((0,r.Z)({},e),{},{imageCssClasses:void 0===f.current.files[0]?"is-invalid":"is-valid"})}))}}),(0,d.jsx)("button",{className:"btn btn-info",onClick:k,disabled:g,children:g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading..."]}):"post"})]})}},186:function(e,t,s){s.d(t,{Z:function(){return i}});var n=s(791),r="Input_main_input__392n6",a=s(184),i=n.forwardRef((function(e,t){return(0,a.jsxs)("div",{className:"mb-3 ".concat(r),children:[(0,a.jsx)("label",{htmlFor:e.name,className:"form-label",children:e.label}),(0,a.jsx)("input",{onBlur:e.onBlur,onChange:e.onChange,ref:t,type:e.type,className:"form-control ".concat(e.cssClasses),id:e.name,defaultValue:e.defaultValue,placeholder:e.placeholder,accept:e.accept})]})}))},830:function(e,t,s){s.d(t,{Z:function(){return a}});s(791);var n="Wrapper_wrapper__eIb1h",r=s(184),a=function(e){return(0,r.jsx)("div",{className:n,children:e.children})}},683:function(e,t,s){function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}s.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=439.7007b990.chunk.js.map