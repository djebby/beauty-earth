{"version":3,"file":"static/js/776.b2d59891.chunk.js","mappings":"mPACA,EAAsB,4B,SC4MtB,EArMuB,WAErB,IAAMA,GAASC,EAAAA,EAAAA,YAAWC,EAAAA,GACpBC,GAAaC,EAAAA,EAAAA,MACbC,GAAWC,EAAAA,EAAAA,QAAO,IAClBC,GAAiBD,EAAAA,EAAAA,QAAO,IACxBE,GAAaF,EAAAA,EAAAA,QAAO,IACpBG,GAAMC,EAAAA,EAAAA,MAAYC,MACxB,GAAkCC,EAAAA,EAAAA,WAAS,GAA3C,eAAOC,EAAP,KAAkBC,EAAlB,KACA,GAA0BF,EAAAA,EAAAA,WAAS,GAAnC,eAAOG,EAAP,KAAcC,EAAd,KACA,GAA8BJ,EAAAA,EAAAA,UAAS,IAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KACA,GAA4DN,EAAAA,EAAAA,WAAS,GAArE,eAAOO,EAAP,KAA+BC,EAA/B,KACA,GAA8CR,EAAAA,EAAAA,UAAS,CACrDS,gBAAiB,GACjBC,sBAAuB,GACvBC,4BAA4B,EAC5BC,wBAAyB,KAJ3B,eAAOC,EAAP,KAAwBC,EAAxB,MAQAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAY,mCAAG,+GAEMC,MAAM,GAAD,OACvBC,iCADuB,oBACsBrB,IAHjC,YAEXsB,EAFW,QAKJC,GALI,iCAMID,EAASE,OANb,QAMTC,EANS,QAOPjB,QAAQkB,aAAenC,EAAOoC,QACpCjC,EAAW,KAEbe,EAAWgB,EAAKjB,SAVD,wBAYfD,GAAS,GAZM,QAcjBF,GAAa,GAdI,kDAgBjBA,GAAa,GACbE,GAAS,GAjBQ,0DAAH,qDAoBlBY,MACC,IAEH,IAAMS,EAAe,SAACC,GACpBxB,GAAa,GACbY,GAAmB,SAACa,GAAD,eAAC,UACfA,GADc,IAEjBhB,4BAA4B,EAC5BC,wBAAyBc,OAE3BE,YAAW,WACTd,GAAmB,SAACa,GAAD,eAAC,UACfA,GADc,IAEjBhB,4BAA4B,SAE7B,MAGCkB,EAAe,mCAAG,oGAGlBpC,EAASqC,QAAQC,MAAMC,OAAOC,QAAU,GACxCtC,EAAemC,QAAQC,MAAMC,OAAOC,QAAU,IAJ5B,iCAMKhB,MAAM,GAAD,OACvBC,iCADuB,oBACsBrB,GAChD,CACEqC,OAAQ,QACRC,KAAMC,KAAKC,UAAU,CACnBC,MAAO7C,EAASqC,QAAQC,MACxBQ,YAAa5C,EAAemC,QAAQC,MACpCS,QAAS5C,EAAWkC,QAAQC,QAE9BU,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAAD,OAAYtD,EAAOuD,UAjBpB,cAMZxB,EANY,gBAqBCA,EAASE,OArBV,OAqBZC,EArBY,OAuBdH,EAASC,IAEXZ,GAA0B,GAC1BoB,YAAW,WACTpB,GAA0B,KACzB,KAEHM,EAAmB,CACjBL,gBAAiB,GACjBC,sBAAuB,GACvBC,4BAA4B,EAC5BC,wBAAyB,OAI3Ba,EAAaH,EAAKsB,SAClBC,QAAQC,IAAIxB,IAvCI,wBA2ClBG,EAAa,qCA3CK,0DA8CpBA,EAAa,mBACboB,QAAQC,IAAR,MA/CoB,0DAAH,qDAmDrB,OAAO3C,GACL,iBAAK4C,UAAU,qBAAqBC,KAAK,QAAzC,WACE,cAAGD,UAAU,uCADf,iDAIE9C,GACF,gBACE8C,UAAU,iBACVE,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,UAChDJ,KAAK,SAHP,UAKE,iBAAMD,UAAU,kBAAhB,2BAGF,UAACM,EAAA,EAAD,WACGxC,EAAgBF,6BACf,iBAAKoC,UAAU,qBAAqBC,KAAK,QAAzC,WACE,cAAGD,UAAU,uCACZlC,EAAgBD,2BAGpBL,IACC,iBAAKwC,UAAU,sBAAsBC,KAAK,QAA1C,WACE,cAAGD,UAAU,yBADf,mCAKF,gBACEA,UAAWO,EACXC,IAAG,UAAKrC,6BAAkCb,EAAQmD,WAClDC,IAAKpD,EAAQkC,eAEf,SAACmB,EAAA,EAAD,CACEC,IAAKlE,EACLmE,KAAK,OACLC,KAAK,QACLC,YAAY,mBACZC,MAAM,mBACNC,aAAc3D,EAAQiC,MACtB2B,WAAYpD,EAAgBJ,gBAC5ByD,OAAQ,WACNpD,GAAmB,SAACqD,GAAD,eAAC,UACfA,GADc,IAEjB1D,gBACEhB,EAASqC,QAAQC,MAAMC,OAAOC,QAAU,EACpC,WACA,sBAIZ,SAACyB,EAAA,EAAD,CACEC,IAAKhE,EACLiE,KAAK,OACLC,KAAK,cACLC,YAAY,yBACZC,MAAM,yBACNC,aAAc3D,EAAQkC,YACtB0B,WAAYpD,EAAgBH,sBAC5BwD,OAAQ,WACNpD,GAAmB,SAACqD,GAAD,eAAC,UACfA,GADc,IAEjBzD,sBACEf,EAAemC,QAAQC,MAAMC,OAAOC,QAAU,GAC1C,WACA,sBAIZ,SAACyB,EAAA,EAAD,CACEC,IAAK/D,EACLgE,KAAK,OACLC,KAAK,UACLC,YAAY,qBACZC,MAAM,qBACNC,aAAc3D,EAAQmC,WAExB,mBACEO,UAAU,eACVqB,QAASvC,EACTwC,SAAUpE,EAHZ,yB,iECjMN,EAA6B,0B,SCuB7B,EArBcqE,EAAAA,YAAiB,SAACC,EAAOZ,GACrC,OACE,iBAAKZ,UAAS,eAAUO,GAAxB,WACE,kBAAOkB,QAASD,EAAMV,KAAMd,UAAU,aAAtC,SACGwB,EAAMR,SAET,kBACEG,OAAQK,EAAML,OACdO,SAAUF,EAAME,SAChBd,IAAKA,EACLC,KAAMW,EAAMX,KACZb,UAAS,uBAAmBwB,EAAMN,YAClCS,GAAIH,EAAMV,KACVG,aAAcO,EAAMP,aACpBF,YAAaS,EAAMT,YACnBa,OAAQJ,EAAMI,gB,+DCjBtB,EAA0B,yB,SCU1B,EANgB,SAACJ,GACf,OACE,gBAAKxB,UAAWO,EAAhB,SAAkCiB,EAAMK,a,oBCP7B,SAASC,EAAgBC,EAAKC,EAAKhD,GAYhD,OAXIgD,KAAOD,EACTE,OAAOC,eAAeH,EAAKC,EAAK,CAC9BhD,MAAOA,EACPmD,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZN,EAAIC,GAAOhD,EAGN+C,ECVT,SAASO,EAAQC,EAAQC,GACvB,IAAIC,EAAOR,OAAOQ,KAAKF,GAEvB,GAAIN,OAAOS,sBAAuB,CAChC,IAAIC,EAAUV,OAAOS,sBAAsBH,GAC3CC,IAAmBG,EAAUA,EAAQC,QAAO,SAAUC,GACpD,OAAOZ,OAAOa,yBAAyBP,EAAQM,GAAKV,eACjDM,EAAKM,KAAKC,MAAMP,EAAME,GAG7B,OAAOF,EAGM,SAASQ,EAAeC,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUlE,OAAQiE,IAAK,CACzC,IAAIE,EAAS,MAAQD,UAAUD,GAAKC,UAAUD,GAAK,GACnDA,EAAI,EAAIb,EAAQL,OAAOoB,IAAS,GAAIC,SAAQ,SAAUtB,GACpD,EAAekB,EAAQlB,EAAKqB,EAAOrB,OAChCC,OAAOsB,0BAA4BtB,OAAOuB,iBAAiBN,EAAQjB,OAAOsB,0BAA0BF,IAAWf,EAAQL,OAAOoB,IAASC,SAAQ,SAAUtB,GAC5JC,OAAOC,eAAegB,EAAQlB,EAAKC,OAAOa,yBAAyBO,EAAQrB,OAI/E,OAAOkB,E","sources":["webpack://frontend/./src/pictures/pages/UpdatePictures.module.css?28ea","pictures/pages/UpdatePictures.js","webpack://frontend/./src/shared/components/UIElements/Input.module.css?b647","shared/components/UIElements/Input.js","webpack://frontend/./src/shared/components/UIElements/Wrapper.module.css?08b1","shared/components/UIElements/Wrapper.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"img\":\"UpdatePictures_img__6untW\"};","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../../shared/context/auth-context.js\";\r\nimport Wrapper from \"../../shared/components/UIElements/Wrapper.js\";\r\nimport Input from \"../../shared/components/UIElements/Input.js\";\r\nimport classes from \"./UpdatePictures.module.css\";\r\n\r\nconst UpdatePictures = () => {\r\n  //-----------------------------------------------------------------------------------------------------------------------------hooks-part\r\n  const logCtx = useContext(AuthContext);\r\n  const navigation = useNavigate();\r\n  const refTitle = useRef(\"\");\r\n  const refDescription = useRef(\"\");\r\n  const refAddress = useRef(\"\");\r\n  const pid = useParams().picId;\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [picture, setPicture] = useState({});\r\n  const [successAlertVisibility, setSuccessAlertVisibility] = useState(false);\r\n  const [inputValidation, setInputValidation] = useState({\r\n    titleCssClasses: \"\",\r\n    descriptionCssClasses: \"\",\r\n    wrongInputsAlertVisibility: false,\r\n    wrongInputsAlertMessage: \"\",\r\n  });\r\n \r\n  //-----------------------------------------------------------------------------------------------------------------------------fetching-data\r\n  useEffect(() => {\r\n    const fetchPicture = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_BACKEND_URL}pictures/${pid}`\r\n        );\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if(data.picture.creator_id !== logCtx.userId){\r\n            navigation(\"/\");\r\n          }\r\n          setPicture(data.picture);\r\n        } else {\r\n          setError(true);\r\n        }\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        setIsLoading(false);\r\n        setError(true);\r\n      }\r\n    };\r\n    fetchPicture();\r\n  }, []);\r\n  //-----------------------------------------------------------------------------------------------------------------------------errorHandler\r\n  const errorHandler = (errorMessage) => {\r\n    setIsLoading(false);\r\n    setInputValidation((prevInputValidation) => ({\r\n      ...prevInputValidation,\r\n      wrongInputsAlertVisibility: true,\r\n      wrongInputsAlertMessage: errorMessage,\r\n    }));\r\n    setTimeout(() => {\r\n      setInputValidation((prevInputValidation) => ({\r\n        ...prevInputValidation,\r\n        wrongInputsAlertVisibility: false,\r\n      }));\r\n    }, 5000);\r\n  };\r\n  //-----------------------------------------------------------------------------------------------------------------------------onSubmitHandler\r\n  const onSubmitHandler = async () => {\r\n    try {\r\n      if (\r\n        refTitle.current.value.trim().length >= 3 &&\r\n        refDescription.current.value.trim().length >= 10\r\n      ) {\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_BACKEND_URL}pictures/${pid}`,\r\n          {\r\n            method: \"PATCH\",\r\n            body: JSON.stringify({\r\n              title: refTitle.current.value,\r\n              description: refDescription.current.value,\r\n              address: refAddress.current.value,\r\n            }),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: `Bearer ${logCtx.token}`\r\n            },\r\n          }\r\n        );\r\n        const data = await response.json();\r\n\r\n        if (response.ok) {\r\n          // this response give us the new updated picture\r\n          setSuccessAlertVisibility(true);\r\n          setTimeout(() => {\r\n            setSuccessAlertVisibility(false);\r\n          }, 5000);\r\n          //reset the form & the css classes of validation\r\n          setInputValidation({\r\n            titleCssClasses: \"\",\r\n            descriptionCssClasses: \"\",\r\n            wrongInputsAlertVisibility: false,\r\n            wrongInputsAlertMessage: \"\",\r\n          });\r\n        } else {\r\n          //error from backend validation...\r\n          errorHandler(data.message);\r\n          console.log(data); // failed to update the pic try again...\r\n        }\r\n      } else {\r\n        //error from frontend validation...\r\n        errorHandler(\"Please Enter a Valid Inputs Value\");\r\n      }\r\n    } catch (error) {\r\n      errorHandler(\"Failed to fetch\");\r\n      console.log(error);\r\n    }\r\n  };\r\n  //-----------------------------------------------------------------------------------------------------------------------------return(JSX)\r\n  return error ? (\r\n    <div className=\"alert alert-danger\" role=\"alert\">\r\n      <i className=\"bi bi-exclamation-octagon-fill m-1\"></i>\r\n      There is no response backed from the server\r\n    </div>\r\n  ) : isLoading ? (\r\n    <div\r\n      className=\"spinner-border\"\r\n      style={{ width: \"3rem\", height: \"3rem\", margin: \"0 48vw\" }}\r\n      role=\"status\"\r\n    >\r\n      <span className=\"visually-hidden\">Loading...</span>\r\n    </div>\r\n  ) : (\r\n    <Wrapper>\r\n      {inputValidation.wrongInputsAlertVisibility && (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          <i className=\"bi bi-exclamation-octagon-fill m-1\"></i>\r\n          {inputValidation.wrongInputsAlertMessage}\r\n        </div>\r\n      )}\r\n      {successAlertVisibility && (\r\n        <div className=\"alert alert-success\" role=\"alert\">\r\n          <i className=\"bi bi-send-check m-1\"></i>\r\n          Picture Updated Successfully\r\n        </div>\r\n      )}\r\n      <img\r\n        className={classes.img}\r\n        src={`${process.env.REACT_APP_ASSET_URL + picture.image_url}`}\r\n        alt={picture.description}\r\n      />\r\n      <Input\r\n        ref={refTitle}\r\n        type=\"text\"\r\n        name=\"title\"\r\n        placeholder=\"picture title...\"\r\n        label=\"Picture Title : \"\r\n        defaultValue={picture.title}\r\n        cssClasses={inputValidation.titleCssClasses}\r\n        onBlur={() => {\r\n          setInputValidation((prevCssClasses) => ({\r\n            ...prevCssClasses,\r\n            titleCssClasses:\r\n              refTitle.current.value.trim().length >= 3\r\n                ? \"is-valid\"\r\n                : \"is-invalid\",\r\n          }));\r\n        }}\r\n      />\r\n      <Input\r\n        ref={refDescription}\r\n        type=\"text\"\r\n        name=\"description\"\r\n        placeholder=\"picture description...\"\r\n        label=\"Picture Description : \"\r\n        defaultValue={picture.description}\r\n        cssClasses={inputValidation.descriptionCssClasses}\r\n        onBlur={() => {\r\n          setInputValidation((prevCssClasses) => ({\r\n            ...prevCssClasses,\r\n            descriptionCssClasses:\r\n              refDescription.current.value.trim().length >= 10\r\n                ? \"is-valid\"\r\n                : \"is-invalid\",\r\n          }));\r\n        }}\r\n      />\r\n      <Input\r\n        ref={refAddress}\r\n        type=\"text\"\r\n        name=\"address\"\r\n        placeholder=\"picture address...\"\r\n        label=\"Picture Address : \"\r\n        defaultValue={picture.address}\r\n      />\r\n      <button\r\n        className=\"btn btn-info\"\r\n        onClick={onSubmitHandler}\r\n        disabled={isLoading}\r\n      >\r\n        Update\r\n      </button>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default UpdatePictures;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"main_input\":\"Input_main_input__392n6\"};","import React from \"react\";\r\nimport classes from \"./Input.module.css\";\r\n\r\nconst Input = React.forwardRef((props, ref) => {\r\n  return (\r\n    <div className={`mb-3 ${classes.main_input}`}>\r\n      <label htmlFor={props.name} className=\"form-label\">\r\n        {props.label}\r\n      </label>\r\n      <input\r\n        onBlur={props.onBlur}\r\n        onChange={props.onChange}\r\n        ref={ref}\r\n        type={props.type}\r\n        className= {`form-control ${props.cssClasses}`}\r\n        id={props.name}\r\n        defaultValue={props.defaultValue}\r\n        placeholder={props.placeholder}\r\n        accept={props.accept}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Input;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Wrapper_wrapper__eIb1h\"};","import React from 'react';\r\n\r\nimport classes from \"./Wrapper.module.css\";\r\n\r\n\r\nconst Wrapper = (props) => {\r\n  return (\r\n    <div className={classes.wrapper}>{props.children}</div>\r\n  );\r\n}\r\n\r\nexport default Wrapper;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["logCtx","useContext","AuthContext","navigation","useNavigate","refTitle","useRef","refDescription","refAddress","pid","useParams","picId","useState","isLoading","setIsLoading","error","setError","picture","setPicture","successAlertVisibility","setSuccessAlertVisibility","titleCssClasses","descriptionCssClasses","wrongInputsAlertVisibility","wrongInputsAlertMessage","inputValidation","setInputValidation","useEffect","fetchPicture","fetch","process","response","ok","json","data","creator_id","userId","errorHandler","errorMessage","prevInputValidation","setTimeout","onSubmitHandler","current","value","trim","length","method","body","JSON","stringify","title","description","address","headers","Authorization","token","message","console","log","className","role","style","width","height","margin","Wrapper","classes","src","image_url","alt","Input","ref","type","name","placeholder","label","defaultValue","cssClasses","onBlur","prevCssClasses","onClick","disabled","React","props","htmlFor","onChange","id","accept","children","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}