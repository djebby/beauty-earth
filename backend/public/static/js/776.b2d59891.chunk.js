"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[776],{776:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(683),s=r(861),a=r(152),i=r(757),c=r.n(i),l=r(791),u=r(871),o=r(108),p=r(830),d=r(186),f="UpdatePictures_img__6untW",h=r(184),b=function(){var e=(0,l.useContext)(o.V),t=(0,u.s0)(),r=(0,l.useRef)(""),i=(0,l.useRef)(""),b=(0,l.useRef)(""),m=(0,u.UO)().picId,g=(0,l.useState)(!0),v=(0,a.Z)(g,2),x=v[0],j=v[1],y=(0,l.useState)(!1),C=(0,a.Z)(y,2),w=C[0],Z=C[1],O=(0,l.useState)({}),k=(0,a.Z)(O,2),P=k[0],N=k[1],I=(0,l.useState)(!1),V=(0,a.Z)(I,2),A=V[0],_=V[1],S=(0,l.useState)({titleCssClasses:"",descriptionCssClasses:"",wrongInputsAlertVisibility:!1,wrongInputsAlertMessage:""}),T=(0,a.Z)(S,2),B=T[0],D=T[1];(0,l.useEffect)((function(){var r=function(){var r=(0,s.Z)(c().mark((function r(){var n,s;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("".concat("http://192.168.1.155:4000/api/","pictures/").concat(m));case 3:if(!(n=r.sent).ok){r.next=12;break}return r.next=7,n.json();case 7:(s=r.sent).picture.creator_id!==e.userId&&t("/"),N(s.picture),r.next=13;break;case 12:Z(!0);case 13:j(!1),r.next=20;break;case 16:r.prev=16,r.t0=r.catch(0),j(!1),Z(!0);case 20:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(){return r.apply(this,arguments)}}();r()}),[]);var E=function(e){j(!1),D((function(t){return(0,n.Z)((0,n.Z)({},t),{},{wrongInputsAlertVisibility:!0,wrongInputsAlertMessage:e})})),setTimeout((function(){D((function(e){return(0,n.Z)((0,n.Z)({},e),{},{wrongInputsAlertVisibility:!1})}))}),5e3)},M=function(){var t=(0,s.Z)(c().mark((function t(){var n,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r.current.value.trim().length>=3&&i.current.value.trim().length>=10)){t.next=11;break}return t.next=4,fetch("".concat("http://192.168.1.155:4000/api/","pictures/").concat(m),{method:"PATCH",body:JSON.stringify({title:r.current.value,description:i.current.value,address:b.current.value}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}});case 4:return n=t.sent,t.next=7,n.json();case 7:s=t.sent,n.ok?(_(!0),setTimeout((function(){_(!1)}),5e3),D({titleCssClasses:"",descriptionCssClasses:"",wrongInputsAlertVisibility:!1,wrongInputsAlertMessage:""})):(E(s.message),console.log(s)),t.next=12;break;case 11:E("Please Enter a Valid Inputs Value");case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),E("Failed to fetch"),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return w?(0,h.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,h.jsx)("i",{className:"bi bi-exclamation-octagon-fill m-1"}),"There is no response backed from the server"]}):x?(0,h.jsx)("div",{className:"spinner-border",style:{width:"3rem",height:"3rem",margin:"0 48vw"},role:"status",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,h.jsxs)(p.Z,{children:[B.wrongInputsAlertVisibility&&(0,h.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,h.jsx)("i",{className:"bi bi-exclamation-octagon-fill m-1"}),B.wrongInputsAlertMessage]}),A&&(0,h.jsxs)("div",{className:"alert alert-success",role:"alert",children:[(0,h.jsx)("i",{className:"bi bi-send-check m-1"}),"Picture Updated Successfully"]}),(0,h.jsx)("img",{className:f,src:"".concat("http://192.168.1.155:4000/"+P.image_url),alt:P.description}),(0,h.jsx)(d.Z,{ref:r,type:"text",name:"title",placeholder:"picture title...",label:"Picture Title : ",defaultValue:P.title,cssClasses:B.titleCssClasses,onBlur:function(){D((function(e){return(0,n.Z)((0,n.Z)({},e),{},{titleCssClasses:r.current.value.trim().length>=3?"is-valid":"is-invalid"})}))}}),(0,h.jsx)(d.Z,{ref:i,type:"text",name:"description",placeholder:"picture description...",label:"Picture Description : ",defaultValue:P.description,cssClasses:B.descriptionCssClasses,onBlur:function(){D((function(e){return(0,n.Z)((0,n.Z)({},e),{},{descriptionCssClasses:i.current.value.trim().length>=10?"is-valid":"is-invalid"})}))}}),(0,h.jsx)(d.Z,{ref:b,type:"text",name:"address",placeholder:"picture address...",label:"Picture Address : ",defaultValue:P.address}),(0,h.jsx)("button",{className:"btn btn-info",onClick:M,disabled:x,children:"Update"})]})}},186:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(791),s="Input_main_input__392n6",a=r(184),i=n.forwardRef((function(e,t){return(0,a.jsxs)("div",{className:"mb-3 ".concat(s),children:[(0,a.jsx)("label",{htmlFor:e.name,className:"form-label",children:e.label}),(0,a.jsx)("input",{onBlur:e.onBlur,onChange:e.onChange,ref:t,type:e.type,className:"form-control ".concat(e.cssClasses),id:e.name,defaultValue:e.defaultValue,placeholder:e.placeholder,accept:e.accept})]})}))},830:function(e,t,r){r.d(t,{Z:function(){return a}});r(791);var n="Wrapper_wrapper__eIb1h",s=r(184),a=function(e){return(0,s.jsx)("div",{className:n,children:e.children})}},683:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=776.b2d59891.chunk.js.map