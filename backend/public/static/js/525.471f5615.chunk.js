"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[525],{855:function(e,r,t){t.d(r,{Z:function(){return m}});var n=t(791),a=t(504),i=t(108),c=t(830),s="PictureCard_img__ab-nx",u="PictureCard_img_avatar__okL9j",o="PictureCard_row__oHEH3",l="PictureCard_edit_delete__9725u",d=t(184),m=function(e){var r=e.picture,t=e.pictureDeleteHandler,m=(0,n.useContext)(i.V);return(0,d.jsxs)(c.Z,{children:[(0,d.jsx)("img",{className:s,src:"".concat("http://localhost:4000/"+r.image_url),alt:r.description}),(0,d.jsxs)("div",{className:o,children:[(0,d.jsx)("h3",{children:r.title}),"creator_id"in r&&(0,d.jsxs)(a.rU,{to:"/".concat(r.creator_id._id,"/pictures"),children:[(0,d.jsx)("img",{className:u,src:"http://localhost:4000/"+r.creator_id.image_url,alt:r.creator_id.name}),r.creator_id.name]})]}),(0,d.jsx)("p",{children:r.description}),(0,d.jsxs)("h6",{children:[(0,d.jsx)("i",{className:"bi bi-geo-alt-fill"})," ",r.address]}),m.isLoggedIn&&m.userId===r.creator_id._id&&(0,d.jsxs)("div",{className:l,children:[(0,d.jsx)(a.rU,{to:"/pictures/update/".concat(r._id),children:(0,d.jsx)("button",{type:"button",className:"btn btn-success mx-4",children:"Editing"})}),(0,d.jsx)("button",{type:"button",className:"btn btn-danger",onClick:t.bind(undefined,r._id),children:"Delete"})]})]})}},525:function(e,r,t){t.r(r),t.d(r,{default:function(){return _}});var n=t(683),a=t(861),i=t(152),c=t(757),s=t.n(c),u=t(791),o=t(871),l=t(108),d=t(855),m=t(830),p="UserAvatar_avatar__img__5wn2E",h=t(184),f=function(e){var r=e.name,t=e.email,n=e.image_url;return(0,h.jsxs)(m.Z,{children:[(0,h.jsx)("img",{className:p,src:"http://localhost:4000/"+n,alt:r}),(0,h.jsx)("h4",{children:r}),(0,h.jsx)("h6",{children:t})]})},_=function(){var e=(0,u.useContext)(l.V),r=(0,u.useState)(!0),t=(0,i.Z)(r,2),c=t[0],m=t[1],p=(0,u.useState)({}),_=(0,i.Z)(p,2),j=_[0],b=_[1],x=(0,u.useState)(!1),g=(0,i.Z)(x,2),v=g[0],P=g[1],w=(0,o.UO)().userId;(0,u.useEffect)((function(){var e=function(){var e=(0,a.Z)(s().mark((function e(){var r,t,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:4000/api/","users/").concat(w));case 3:return(r=e.sent).ok||(P(!0),m(!1)),e.next=7,r.json();case 7:t=e.sent,r.ok&&null!==t.userPictures&&(a=t.userPictures.pictures_ids.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{creator_id:{_id:t.userPictures._id,email:t.userPictures.email,name:t.userPictures.name,image_url:t.userPictures.image_url}})})),i={_id:t.userPictures._id,email:t.userPictures.email,name:t.userPictures.name,image_url:t.userPictures.image_url},b({pictures:a,creator:i}),m(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),P(!0),m(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[w]);var y=function(){var r=(0,a.Z)(s().mark((function r(t){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("".concat("http://localhost:4000/api/","pictures/").concat(t),{method:"DELETE",body:{},headers:{Authorization:"Bearer ".concat(e.token)}});case 3:r.sent.ok&&b((function(e){return(0,n.Z)((0,n.Z)({},e),{},{pictures:e.pictures.filter((function(e){return e._id!==t}))})})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),P(!0),setTimeout((function(){P(!1)}),1e3);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}();return v?(0,h.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,h.jsx)("i",{className:"bi bi-exclamation-octagon-fill m-1"}),"There is no response backed from the server"]}):c?(0,h.jsx)("div",{className:"spinner-border",style:{width:"3rem",height:"3rem",margin:"0 48vw"},role:"status",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):0===j.pictures.length?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f,{name:j.creator.name,email:j.creator.email,image_url:j.creator.image_url}),(0,h.jsx)("div",{className:"alert alert-warning",role:"alert",children:"No Picture Founded!"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f,{name:j.creator.name,email:j.creator.email,image_url:j.creator.image_url}),j.pictures.map((function(e){return(0,h.jsx)(d.Z,{picture:e,pictureDeleteHandler:y},e._id)}))]})}},830:function(e,r,t){t.d(r,{Z:function(){return i}});t(791);var n="Wrapper_wrapper__eIb1h",a=t(184),i=function(e){return(0,a.jsx)("div",{className:n,children:e.children})}},683:function(e,r,t){function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}t.d(r,{Z:function(){return i}})}}]);
//# sourceMappingURL=525.471f5615.chunk.js.map