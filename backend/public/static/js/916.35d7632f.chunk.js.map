{"version":3,"file":"static/js/916.35d7632f.chunk.js","mappings":"gLACA,EAAsB,yBAAtB,EAA4D,gCAA5D,EAAkG,yBAAlG,EAAyI,iC,SCwDzI,EAlDoB,SAAC,GAAuC,IAArCA,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,qBAExBC,GAASC,EAAAA,EAAAA,YAAWC,EAAAA,GAG1B,OACE,UAACC,EAAA,EAAD,YACE,gBACEC,UAAWC,EACXC,IAAG,UAAKC,yBAAkCT,EAAQU,WAClDC,IAAKX,EAAQY,eAEf,iBAAKN,UAAWC,EAAhB,WACE,wBAAKP,EAAQa,QAEZ,eAAgBb,IACf,UAAC,KAAD,CAAMc,GAAE,WAAMd,EAAQe,WAAWC,IAAzB,aAAR,WACE,gBACEV,UAAWC,EACXC,IACEC,yBAAkCT,EAAQe,WAAWL,UAEvDC,IAAKX,EAAQe,WAAWE,OAEzBjB,EAAQe,WAAWE,YAI1B,uBAAIjB,EAAQY,eACZ,2BACE,cAAGN,UAAU,uBADf,IAC0CN,EAAQkB,WAEjDhB,EAAOiB,YAAgBjB,EAAOkB,SAAWpB,EAAQe,WAAWC,MAAS,iBAAKV,UAAWC,EAAhB,WACpE,SAAC,KAAD,CAAMO,GAAE,2BAAsBd,EAAQgB,KAAtC,UACE,mBAAQK,KAAK,SAASf,UAAU,uBAAhC,wBAIF,mBACEe,KAAK,SACLf,UAAU,iBACVgB,QAASrB,EAAqBsB,K,UAAWvB,EAAQgB,KAHnD,4B,oIC5CR,EAA2B,2B,SCyG3B,EAlGiB,WAEf,IAAMd,GAASC,EAAAA,EAAAA,YAAWC,EAAAA,GAC1B,GAAkCoB,EAAAA,EAAAA,WAAS,GAA3C,eAAOC,EAAP,KAAkBC,EAAlB,KACA,GAAgCF,EAAAA,EAAAA,UAAS,IAAzC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAA0CJ,EAAAA,EAAAA,UAAS,GAAnD,eAAOK,EAAP,KAAsBC,EAAtB,KACA,GAAwCN,EAAAA,EAAAA,UAAS,GAAjD,eAAOO,EAAP,KAAqBC,EAArB,KACA,GAA0BR,EAAAA,EAAAA,WAAS,GAAnC,eAAOS,EAAP,KAAcC,EAAd,MAEAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAa,mCAAG,+GAEKC,MAAM,GAAD,OACvB5B,6BADuB,kCACoCsB,IAH9C,cAEZO,EAFY,QAKJC,KACZb,GAAa,GACbQ,GAAS,IAPO,SASCI,EAASE,OATV,OASZC,EATY,OAUdH,EAASC,IAAwB,OAAlBE,EAAKd,WACtBC,EAAYa,EAAKd,UACjBG,EAAiBW,EAAKZ,eACtBH,GAAa,IAbG,kDAgBlBA,GAAa,GACbQ,GAAS,GAjBS,0DAAH,qDAoBnBE,MACC,CAACL,IAEJ,IAIM9B,EAAoB,mCAAG,WAAOyC,GAAP,0FAEFL,MAAM,GAAD,OACvB5B,6BADuB,oBACsBiC,GAChD,CACEC,OAAQ,SACRC,KAAM,GACNC,QAAS,CAAEC,cAAc,UAAD,OAAY5C,EAAO6C,UAPtB,cAUZR,IAEXX,GAAY,SAACoB,GAAD,OACVA,EAAYC,QAAO,SAACC,GAAD,OAASA,EAAIlC,MAAQ0B,QAbnB,gDAiBzBR,GAAS,GACTiB,YAAW,WACTjB,GAAS,KACR,KApBsB,yDAAH,sDAwB1B,OAAOD,GACL,iBAAK3B,UAAU,qBAAqB8C,KAAK,QAAzC,WACE,cAAG9C,UAAU,uCADf,iDAIEmB,GACF,gBACEnB,UAAU,iBACV+C,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,UAChDJ,KAAK,SAHP,UAKE,iBAAM9C,UAAU,kBAAhB,0BAEoB,IAApBqB,EAAS8B,QACX,gBAAKnD,UAAU,sBAAsB8C,KAAK,QAA1C,kCAIA,gCACGzB,EAAS+B,KAAI,SAAC1D,GAAD,OACZ,SAAC2D,EAAA,EAAD,CAEE3D,QAASA,EACTC,qBAAsBA,GAFjBD,EAAQgB,SAKjB,mBACEV,UAAW,gBAAkBC,EAC7Be,QAxDmB,WACvBU,GAAgB,SAAC4B,GAAD,OAAmBA,EAAgB,MAwD/CC,SA5FoB,GA4FV9B,EAAqCF,EAHjD,gC,+DC9FN,EAA0B,yB,SCU1B,EANgB,SAACiC,GACf,OACE,gBAAKxD,UAAWC,EAAhB,SAAkCuD,EAAMC","sources":["webpack://frontend/./src/pictures/components/PictureCard.module.css?4c33","pictures/components/PictureCard.js","webpack://frontend/./src/pictures/pages/Pictures.module.css?65a7","pictures/pages/Pictures.js","webpack://frontend/./src/shared/components/UIElements/Wrapper.module.css?08b1","shared/components/UIElements/Wrapper.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"img\":\"PictureCard_img__ab-nx\",\"img_avatar\":\"PictureCard_img_avatar__okL9j\",\"row\":\"PictureCard_row__oHEH3\",\"edit_delete\":\"PictureCard_edit_delete__9725u\"};","import React, {useContext} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../../shared/context/auth-context.js\";\r\nimport Wrapper from \"../../shared/components/UIElements/Wrapper.js\";\r\nimport classes from \"./PictureCard.module.css\";\r\n\r\nconst PictureCard = ({ picture, pictureDeleteHandler }) => {\r\n\r\n  const logCtx = useContext(AuthContext);\r\n  \r\n\r\n  return (\r\n    <Wrapper>\r\n      <img\r\n        className={classes.img}\r\n        src={`${process.env.REACT_APP_ASSET_URL + picture.image_url}`}\r\n        alt={picture.description}\r\n      />\r\n      <div className={classes.row}>\r\n        <h3>{picture.title}</h3>\r\n\r\n        {\"creator_id\" in picture && (\r\n          <Link to={`/${picture.creator_id._id}/pictures`}>\r\n            <img\r\n              className={classes.img_avatar}\r\n              src={\r\n                process.env.REACT_APP_ASSET_URL + picture.creator_id.image_url\r\n              }\r\n              alt={picture.creator_id.name}\r\n            />\r\n            {picture.creator_id.name}\r\n          </Link>\r\n        )}\r\n      </div>\r\n      <p>{picture.description}</p>\r\n      <h6>\r\n        <i className=\"bi bi-geo-alt-fill\"></i> {picture.address}\r\n      </h6>\r\n      {logCtx.isLoggedIn &&  (logCtx.userId === picture.creator_id._id ) && <div className={classes.edit_delete}>\r\n        <Link to={`/pictures/update/${picture._id}`}>\r\n          <button type=\"button\" className=\"btn btn-success mx-4\">\r\n            Editing\r\n          </button>\r\n        </Link>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-danger\"\r\n          onClick={pictureDeleteHandler.bind(this, picture._id)}\r\n        >\r\n          Delete\r\n        </button>\r\n      </div>}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default PictureCard;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"load_btn\":\"Pictures_load_btn__vAc26\"};","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { AuthContext } from \"../../shared/context/auth-context.js\";\r\nimport PictureCard from \"../components/PictureCard.js\";\r\nimport classes from \"./Pictures.module.css\";\r\n\r\nconst PICTURE_BUCKET_SIZE = 10; // 10 picture per bucket\r\n\r\nconst Pictures = () => {\r\n  //-----------------------------------------------------------------------------------------------------------------------------hooks-part\r\n  const logCtx = useContext(AuthContext);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [pictures, setPictures] = useState([]);\r\n  const [picturesCount, setPicturesCount] = useState(0);\r\n  const [picBucketNum, incPicBucketNum] = useState(1);\r\n  const [error, setError] = useState(false);\r\n  //-----------------------------------------------------------------------------------------------------------------------------fetching-data\r\n  useEffect(() => {\r\n    const fetchPictures = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_BACKEND_URL}pictures/?picBucketNum=${picBucketNum}`\r\n        );\r\n        if (!response.ok) {\r\n          setIsLoading(false);\r\n          setError(true);\r\n        }\r\n        const data = await response.json();\r\n        if (response.ok && data.pictures !== null) {\r\n          setPictures(data.pictures);\r\n          setPicturesCount(data.picturesCount);\r\n          setIsLoading(false);\r\n        }\r\n      } catch (error) {\r\n        setIsLoading(false);\r\n        setError(true);\r\n      }\r\n    };\r\n    fetchPictures();\r\n  }, [picBucketNum]);\r\n\r\n  const loadMorePictures = () => {\r\n    incPicBucketNum((prevBucketNum) => prevBucketNum + 1);\r\n  };\r\n  //-----------------------------------------------------------------------------------------------------------------------------pictureDeleteHandler\r\n  const pictureDeleteHandler = async (id) => {\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_BACKEND_URL}pictures/${id}`,\r\n        {\r\n          method: \"DELETE\",\r\n          body: {},\r\n          headers: { Authorization: `Bearer ${logCtx.token}` },\r\n        }\r\n      );\r\n      if (response.ok) {\r\n        //if the response is ok we should filter out the deleted pic from the array\r\n        setPictures((oldPictures) =>\r\n          oldPictures.filter((pic) => pic._id !== id)\r\n        );\r\n      }\r\n    } catch (error) {\r\n      setError(true);\r\n      setTimeout(() => {\r\n        setError(false);\r\n      }, 1000);\r\n    }\r\n  };\r\n  //-----------------------------------------------------------------------------------------------------------------------------return(JSX)\r\n  return error ? (\r\n    <div className=\"alert alert-danger\" role=\"alert\">\r\n      <i className=\"bi bi-exclamation-octagon-fill m-1\"></i>\r\n      There is no response backed from the server\r\n    </div>\r\n  ) : isLoading ? (\r\n    <div\r\n      className=\"spinner-border\"\r\n      style={{ width: \"3rem\", height: \"3rem\", margin: \"0 48vw\" }}\r\n      role=\"status\"\r\n    >\r\n      <span className=\"visually-hidden\">Loading...</span>\r\n    </div>\r\n  ) : pictures.length === 0 ? (\r\n    <div className=\"alert alert-warning\" role=\"alert\">\r\n      No Picture Founded!\r\n    </div>\r\n  ) : (\r\n    <>\r\n      {pictures.map((picture) => (\r\n        <PictureCard\r\n          key={picture._id}\r\n          picture={picture}\r\n          pictureDeleteHandler={pictureDeleteHandler}\r\n        />\r\n      ))}\r\n      <button\r\n        className={\"btn btn-dark \" + classes.load_btn}\r\n        onClick={loadMorePictures}\r\n        disabled={picBucketNum * PICTURE_BUCKET_SIZE > picturesCount}\r\n      >\r\n        more pictures\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Pictures;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Wrapper_wrapper__eIb1h\"};","import React from 'react';\r\n\r\nimport classes from \"./Wrapper.module.css\";\r\n\r\n\r\nconst Wrapper = (props) => {\r\n  return (\r\n    <div className={classes.wrapper}>{props.children}</div>\r\n  );\r\n}\r\n\r\nexport default Wrapper;"],"names":["picture","pictureDeleteHandler","logCtx","useContext","AuthContext","Wrapper","className","classes","src","process","image_url","alt","description","title","to","creator_id","_id","name","address","isLoggedIn","userId","type","onClick","bind","useState","isLoading","setIsLoading","pictures","setPictures","picturesCount","setPicturesCount","picBucketNum","incPicBucketNum","error","setError","useEffect","fetchPictures","fetch","response","ok","json","data","id","method","body","headers","Authorization","token","oldPictures","filter","pic","setTimeout","role","style","width","height","margin","length","map","PictureCard","prevBucketNum","disabled","props","children"],"sourceRoot":""}